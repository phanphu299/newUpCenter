var vue=new Vue({el:"#ChiPhiIndex",data:{title:"Tính Lương/Chi Phí",messageText:"",color:"",timeout:3e3,snackbar:!1,deleteDialog:!1,dialog:!1,selectedThang:"",selectedNam:"",itemThang:["1","2","3","4","5","6","7","8","9","10","11","12"],itemKhuyenMai:["5","10","15","20","25","30","35","40","45","50"],itemNam:[(new Date).toISOString().substr(0,4)-2,(new Date).toISOString().substr(0,4)-1,(new Date).toISOString().substr(0,4)-0],chiPhiList:[],headers:[{text:"Tên",align:"left",sortable:!0},{text:"Chi Phí",align:"left",sortable:!0,class:"red-header"},{text:"Lương Căn Bản/Chi Phí",align:"left",sortable:!0},{text:"Lương Giảng Dạy",align:"left",sortable:!0},{text:"Lương Kèm",align:"left",sortable:!0},{text:"Số Giờ Dạy",align:"left",sortable:!0},{text:"Số Giờ Kèm",align:"left",sortable:!0},{text:"Hoa Hồng",align:"left",sortable:!0},{text:"Số HV",align:"left",sortable:!0},{text:"Bonus",align:"left",sortable:!0},{text:"Khoảng Trừ Khác",align:"left",sortable:!0}]},computed:{total(){let t=0;for(let e of this.chiPhiList)t+=1*e.chiPhiMoi;return t}},methods:{async onTinhChiPhi(t){isNaN(t.soHocVien)||isNaN(t.soGioDay)||isNaN(t.soGioKem)||isNaN(t.bonus)||isNaN(t.minus)||(t.chiPhiMoi=t.salary_Expense+t.mucHoaHong*t.soHocVien+t.soGioKem*t.tutoringRate+t.soGioDay*t.teachingRate+1*t.bonus-1*t.minus)},async onTinhTien(){let t=this;""!==this.selectedNam&&""!==this.selectedThang&&(""===this.khuyenMai&&(this.khuyenMai=0),await axios.get("/ChiPhi/GetChiPhiAsync?month="+this.selectedThang+"&year="+this.selectedNam).then(function(e){t.chiPhiList=e.data.chiPhiList}).catch(function(t){console.log(t)}))},formatNumber:t=>t.toLocaleString("it-IT",{style:"currency",currency:"VND"}),async onLuuChiPhi(){let t=this,e=0;for(let t=0;t<this.chiPhiList.length;t++)e+=this.chiPhiList[t].chiPhiMoi,this.chiPhiList[t].year=this.selectedNam,this.chiPhiList[t].month=this.selectedThang;await axios({method:"post",url:"/ChiPhi/LuuChiPhiAsync",data:{models:t.chiPhiList}}).then(function(e){if(console.log(e),"OK"===e.data.status){t.snackbar=!0,t.messageText="Lưu Chi Phí thành công !!!",t.color="success";for(let e=0;e<t.chiPhiList.length;e++)t.chiPhiList[e].daLuu=!0}else t.snackbar=!0,t.messageText=e.data.message,t.color="error"}).catch(function(e){console.log(e),t.snackbar=!0,t.messageText="Lưu Chi Phí lỗi: "+e,t.color="error"})},async onLuuNhapChiPhi(){let t=this,e=0;for(let t=0;t<this.chiPhiList.length;t++)e+=this.chiPhiList[t].chiPhiMoi,this.chiPhiList[t].year=this.selectedNam,this.chiPhiList[t].month=this.selectedThang;await axios({method:"post",url:"/ChiPhi/LuuNhapChiPhiAsync",data:{models:t.chiPhiList}}).then(function(e){console.log(e),"OK"===e.data.status?(t.snackbar=!0,t.messageText="Lưu Bảng Tính thành công !!!",t.color="success"):(t.snackbar=!0,t.messageText=e.data.message,t.color="error")}).catch(function(e){console.log(e),t.snackbar=!0,t.messageText="Lưu Bảng Tính lỗi: "+e,t.color="error"})}}});