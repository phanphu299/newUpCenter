var vue=new Vue({el:"#GioHocIndex",data:{title:"Quản Lý Giờ Học",messageText:"",color:"",timeout:3e3,snackbar:!1,dialog:!1,deleteDialog:!1,dialogEdit:!1,alert:!1,alertEdit:!1,search:"",newItem:{from:"",to:""},itemToDelete:{},itemToEdit:{},editedIndex:-1,headers:[{text:"Action",align:"left",sortable:!1,value:""},{text:"Giờ Bắt Đầu",value:"from",align:"left",sortable:!0},{text:"Giờ Kết Thúc",value:"to",align:"left",sortable:!0},{text:"Ngày Tạo",value:"createdDate",align:"left",sortable:!0},{text:"Người Tạo",value:"createdBy",align:"left",sortable:!0},{text:"Ngày Sửa",value:"updatedDate",align:"left",sortable:!0},{text:"Người Sửa",value:"updatedBy",align:"left",sortable:!0}],khoaHocItems:[]},async beforeCreate(){let e=this;await axios.get("/category/GetGioHocAsync").then(function(t){e.khoaHocItems=t.data}).catch(function(e){console.log(e.response.data.Message)})},methods:{async onUpdate(e){let t=this;await axios({method:"put",url:"/category/UpdateGioHocAsync",data:{From:e.from,To:e.to,GioHocId:e.gioHocId}}).then(function(e){console.log(e),"OK"===e.data.status?(Object.assign(t.khoaHocItems[t.editedIndex],e.data.result),t.snackbar=!0,t.messageText="Cập nhật thành công !!!",t.color="success",t.dialogEdit=!1):(t.snackbar=!0,t.messageText=e.data.message,t.color="error",t.dialogEdit=!1)}).catch(function(e){console.log(e.response.data.Message),t.snackbar=!0,t.messageText="Cập nhật lỗi: "+e.response.data.Message,t.color="error",t.dialogEdit=!1})},mappingEditItem(e){this.editedIndex=this.khoaHocItems.indexOf(e),this.itemToEdit=Object.assign({},e)},async onSave(e){if(""===this.newItem.from||""===this.newItem.to)this.alert=!0;else{this.dialog=!1;let e=this;await axios({method:"post",url:"/category/CreateGioHocAsync",data:{From:e.newItem.from,To:e.newItem.to}}).then(function(t){console.log(t),"OK"===t.data.status?(e.khoaHocItems.splice(0,0,t.data.result),e.snackbar=!0,e.messageText="Thêm mới thành công !!!",e.color="success",e.newItem.from="",e.newItem.to=""):(e.snackbar=!0,e.messageText=t.data.message,e.color="error")}).catch(function(t){console.log(t.response.data.Message),e.snackbar=!0,e.messageText="Thêm mới lỗi: "+t.response.data.Message,e.color="error"})}},async onDelete(e){let t=this;await axios({method:"delete",url:"/category/DeleteGioHocAsync",data:{GioHocId:e.gioHocId}}).then(function(a){console.log(a),"OK"===a.data.status?(t.khoaHocItems.splice(t.khoaHocItems.indexOf(e),1),t.snackbar=!0,t.messageText="Xóa thành công !!!",t.color="success",t.deleteDialog=!1):(t.snackbar=!0,t.messageText=a.data.message,t.color="error")}).catch(function(e){console.log(e.response.data.Message),t.snackbar=!0,t.messageText="Xóa lỗi: "+e.response.data.Message,t.color="error"})}}});