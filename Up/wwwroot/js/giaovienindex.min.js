var vue=new Vue({el:"#GiaoVienIndex",data:{title:"Quản Lý Nhân Viên",messageText:"",color:"",timeout:3e3,snackbar:!1,deleteDialog:!1,dialogEdit:!1,dialog:!1,alert:!1,alertEdit:!1,search:"",newItem:{name:"",phone:"",teachingRate:0,tutoringRate:0,basicSalary:0,facebookAccount:"",diaChi:"",initialName:"",cmnd:"",loaiGiaoVien:"",loaiCheDo:""},itemToDelete:{},itemToEdit:{},editedIndex:-1,alertMessage:"",headers:[{text:"Action",align:"left",sortable:!1,value:""},{text:"Tên Nhân Viên",value:"name",align:"left",sortable:!0},{text:"Loại Nhân Viên",value:"loaiGiaoVien",align:"left",sortable:!0},{text:"Loại Chế Độ",value:"loaiCheDo",align:"left",sortable:!0},{text:"Số Điện Thoại",value:"phone",align:"left",sortable:!0},{text:"Teaching Rate",value:"teachingRate",align:"left",sortable:!0},{text:"Tutoring Rate",value:"tutoringRate",align:"left",sortable:!0},{text:"Lương Cơ Bản",value:"basicSalary",align:"left",sortable:!0},{text:"Facebook",value:"facebookAccount",align:"left",sortable:!0},{text:"Địa Chỉ",value:"diaChi",align:"left",sortable:!0},{text:"Initial Name",value:"initialName",align:"left",sortable:!0},{text:"CMND",value:"cmnd",align:"left",sortable:!0},{text:"Ngày Tạo",value:"createdDate",align:"left",sortable:!0},{text:"Người Tạo",value:"createdBy",align:"left",sortable:!0},{text:"Ngày Sửa",value:"updatedDate",align:"left",sortable:!0},{text:"Người Sửa",value:"updatedBy",align:"left",sortable:!0}],khoaHocItems:[],itemLoaiGiaoVien:[],itemLoaiCheDo:[]},async beforeCreate(){let e=this;await axios.get("/GiaoVien/GetGiaoVienAsync").then(function(a){e.khoaHocItems=a.data}).catch(function(e){console.log(e)}),await axios.get("/Category/GetLoaiGiaoVienAsync").then(function(a){e.itemLoaiGiaoVien=a.data}).catch(function(e){console.log(e)}),await axios.get("/Category/GetLoaiCheDoAsync").then(function(a){e.itemLoaiCheDo=a.data}).catch(function(e){console.log(e)})},filters:{truncate:function(e,a,t){return e.substring(0,a)+t}},methods:{mappingEditItem(e){this.editedIndex=this.khoaHocItems.indexOf(e),this.itemToEdit=Object.assign({},e)},async onUpdate(e){if(""===e.name||""===e.phone||""===e.facebookAccount||""===e.diaChi||""===e.initialName||""===e.cmnd)this.alertMessage="Không được bỏ trống",this.alertEdit=!0;else if(isNaN(e.teachingRate)||isNaN(e.tutoringRate)||isNaN(e.basicSalary))this.alertMessage="Teaching Rate, Tutoring Rate, Basic Salary chỉ được nhập số",this.alertEdit=!0;else{let a=this;await axios({method:"put",url:"/giaovien/UpdateGiaoVienAsync",data:{GiaoVienId:e.giaoVienId,Name:e.name,Phone:e.phone,TeachingRate:e.teachingRate,TutoringRate:e.tutoringRate,BasicSalary:e.basicSalary,FacebookAccount:e.facebookAccount,DiaChi:e.diaChi,InitialName:e.initialName,CMND:e.cmnd,LoaiGiaoVienId:e.loaiGiaoVienId,LoaiCheDoId:e.loaiCheDoId}}).then(function(e){console.log(e),"OK"===e.data.status?(Object.assign(a.khoaHocItems[a.editedIndex],e.data.result),a.snackbar=!0,a.messageText="Cập nhật thành công !!!",a.color="success",a.dialogEdit=!1):(a.snackbar=!0,a.messageText=e.data.message,a.color="error",a.dialogEdit=!1)}).catch(function(e){console.log(e),a.snackbar=!0,a.messageText="Cập nhật lỗi: "+e,a.color="error",a.dialogEdit=!1})}},async onSave(e){if(""===this.newItem.name||""===this.newItem.phone||""===this.newItem.facebookAccount||""===this.newItem.diaChi||""===this.newItem.initialName||""===this.newItem.cmnd)this.alertMessage="Không được bỏ trống",this.alert=!0;else if(isNaN(this.newItem.teachingRate)||isNaN(this.newItem.tutoringRate)||isNaN(this.newItem.basicSalary))this.alertMessage="Teaching Rate, Tutoring Rate, Basic Salary chỉ được nhập số",this.alert=!0;else{this.dialog=!1;let e=this;await axios({method:"post",url:"/giaovien/CreateGiaoVienAsync",data:{Name:e.newItem.name,Phone:e.newItem.phone,TeachingRate:e.newItem.teachingRate,TutoringRate:e.newItem.tutoringRate,BasicSalary:e.newItem.basicSalary,FacebookAccount:e.newItem.facebookAccount,DiaChi:e.newItem.diaChi,InitialName:e.newItem.initialName,CMND:e.newItem.cmnd,LoaiGiaoVienId:e.newItem.loaiGiaoVien,LoaiCheDoId:e.newItem.loaiCheDo}}).then(function(a){console.log(a),"OK"===a.data.status?(e.khoaHocItems.splice(0,0,a.data.result),e.snackbar=!0,e.messageText="Thêm mới thành công !!!",e.color="success",e.newItem.name="",e.newItem.phone="",e.newItem.teachingRate=0,e.newItem.tutoringRate=0,e.newItem.basicSalary=0,e.newItem.facebookAccount="",e.newItem.diaChi="",e.newItem.initialName="",e.newItem.cmnd=""):(e.snackbar=!0,e.messageText=a.data.message,e.color="error")}).catch(function(a){console.log(a),e.snackbar=!0,e.messageText="Thêm mới lỗi: "+a,e.color="error"})}},async onDelete(e){let a=this;await axios({method:"delete",url:"/giaovien/DeleteGiaoVienAsync",data:{GiaoVienId:e.giaoVienId}}).then(function(t){console.log(t),"OK"===t.data.status?(a.khoaHocItems.splice(a.khoaHocItems.indexOf(e),1),a.snackbar=!0,a.messageText="Xóa thành công !!!",a.color="success",a.deleteDialog=!1):(a.snackbar=!0,a.messageText=t.data.message,a.color="error")}).catch(function(e){console.log(e),a.snackbar=!0,a.messageText="Xóa lỗi: "+e,a.color="error"})}}});