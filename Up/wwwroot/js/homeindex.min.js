Vue.component("line-chart",{extends:VueChartJs.Line,props:{chartdata:{type:Object,default:null},options:{type:Object,default:null}},mounted(){this.renderChart(this.chartdata,{responsive:!0,maintainAspectRatio:!1})}});var vue=new Vue({el:"#HomeIndex",data:{tab:null,loadedHocVien:!1,loadedGiaoVien:!1,loadedDoanhThuHocPhi:!1,loadedNo:!1,loadedChiPhi:!1,chartdataHocVien:{labels:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],datasets:[{label:"Giao Tiếp",data:[],borderColor:"#4caf50",pointBackgroundColor:"#4caf50",borderWidth:1,pointBorderColor:"#4caf50",backgroundColor:"transparent"},{label:"Thiếu Nhi",data:[],borderColor:"#1976d2",pointBackgroundColor:"#1976d2",borderWidth:1,pointBorderColor:"#1976d2",backgroundColor:"transparent"},{label:"Chứng Chỉ Quốc Tế",data:[],borderColor:"#f44336",pointBackgroundColor:"#f44336",borderWidth:1,pointBorderColor:"#f44336",backgroundColor:"transparent"}]},chartdataGiaoVien:{labels:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],datasets:[{label:"Full Time",data:[],borderColor:"#4caf50",pointBackgroundColor:"#4caf50",borderWidth:1,pointBorderColor:"#4caf50",backgroundColor:"transparent"},{label:"Part Time",data:[],borderColor:"#1976d2",pointBackgroundColor:"#1976d2",borderWidth:1,pointBorderColor:"#1976d2",backgroundColor:"transparent"}]},thongKeTong:{hocVien:0,giaoVien:0,doanhThu:0,chiPhi:0},chartdataDoanhThuHocPhi:{labels:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],datasets:[{label:"Doanh Thu Học Phí",data:[],borderColor:"#1976d2",pointBackgroundColor:"#1976d2",borderWidth:1,pointBorderColor:"#1976d2",backgroundColor:"transparent"},{label:"Chi Phí",data:[],borderColor:"#f44336",pointBackgroundColor:"#f44336",borderWidth:1,pointBorderColor:"#f44336",backgroundColor:"transparent"}]},chartdataNo:{labels:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],datasets:[{label:"Học Viên Nợ",data:[],borderColor:"#f44336",pointBackgroundColor:"#f44336",borderWidth:1,pointBorderColor:"#f44336",backgroundColor:"transparent"}]},hocVienNghiNhieu:{},headers:[{text:"Họ Tên",value:"tenHocVien",align:"left",sortable:!0},{text:"Lớp Học",value:"tenLop",align:"left",sortable:!0},{text:"Ngày Học Cuối",value:"ngayHocCuoi",align:"left",sortable:!0}],search:"",bienLai:{},headersBienLai:[{text:"Action",align:"left",sortable:!1,value:""},{text:"Mã Biên Lai",value:"maBienLai",align:"left",sortable:!0},{text:"Tên Học Viên",value:"fullName",align:"left",sortable:!0},{text:"Lớp Học",value:"tenLop",align:"left",sortable:!0},{text:"Học Phí",value:"hocPhi",align:"left",sortable:!0},{text:"Tháng Học Phí",value:"thangHocPhi",align:"left",sortable:!0},{text:"Ngày Tạo",value:"createdDate",align:"left",sortable:!0},{text:"Người Tạo",value:"createdBy",align:"left",sortable:!0}],searchBienLai:"",deleteBienLaiDialog:!1,bienLaiToDelete:{},hocVienTheoDoi:[],headersTheoDoi:[{text:"Action",align:"left",sortable:!1,value:""},{text:"Họ Tên",value:"tenHocVien",align:"left",sortable:!0},{text:"Trigram",value:"trigram",align:"left",sortable:!0},{text:"Ghi Chú",value:"ghiChu",align:"left",sortable:!0}],searchTheoDoi:"",loadingHocVien:!1,itemsHocVien:[],itemToDeleteTheoDoi:{},dialogTheoDoi:!1,deleteDialogTheoDoi:!1,newItemTheoDoi:{hocVien:"",ghiChu:""},alert:!1,searchHocVien:null,messageText:"",color:"",timeout:3e3,snackbar:!1},watch:{searchHocVien(e){e&&e!==this.newItemTheoDoi.hocVien&&this.querySelections(e)}},async mounted(){var e=this;try{await axios.get("/ThongKe/GetThongKeHocVienAsync").then(function(a){e.chartdataHocVien.datasets[0].data=a.data.giaoTiep,e.chartdataHocVien.datasets[1].data=a.data.thieuNhi,e.chartdataHocVien.datasets[2].data=a.data.quocTe,e.loadedHocVien=!0}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/ThongKe/GetThongKeGiaoVienAsync").then(function(a){e.chartdataGiaoVien.datasets[0].data=a.data.fullTime,e.chartdataGiaoVien.datasets[1].data=a.data.partTime,e.loadedGiaoVien=!0}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/ThongKe/GetTongGiaoVienVaHocVienAsync").then(function(a){e.thongKeTong.hocVien=a.data.hocVien,e.thongKeTong.giaoVien=a.data.giaoVien,e.thongKeTong.doanhThu=a.data.doanhThu,e.thongKeTong.chiPhi=a.data.chiPhi}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/ThongKe/GetThongKeDoanhThu_HocPhiAsync").then(function(a){e.chartdataDoanhThuHocPhi.datasets[0].data=a.data.doanhThu,e.chartdataDoanhThuHocPhi.datasets[1].data=a.data.chiPhi,e.loadedDoanhThuHocPhi=!0}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/ThongKe/GetNoAsync").then(function(a){e.chartdataNo.datasets[0].data=a.data,e.loadedNo=!0}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/ThongKe/GetHocVienNghiHon3NgayAsync").then(function(a){e.hocVienNghiNhieu=a.data}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/HocPhi/CheckHocPhiTronGoiAsync").then(function(e){}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/BienLai/GetBienLaiAsync").then(function(a){e.bienLai=a.data}).catch(function(e){console.log(e.response.data.Message)}),await axios.get("/ThongKe/GetHocVienTheoDoiAsync").then(function(a){e.hocVienTheoDoi=a.data}).catch(function(e){console.log(e.response.data.Message)})}catch(e){console.error(e)}},methods:{formatNumber:e=>e.toLocaleString("it-IT",{style:"currency",currency:"VND"}),async querySelections(e){this.loadingHocVien=!0;let a=this;await axios.get("/hocvien/GetHocVienByNameAsync?name="+e).then(function(e){a.itemsHocVien=e.data,a.loadingHocVien=!1}).catch(function(e){console.log(e.response.data.Message)})},async onSaveTheoDoi(){if(""===this.newItemTheoDoi.ghiChu)this.alert=!0;else{this.dialog=!1;let e=this;await axios({method:"post",url:"/thongke/CreateHocVienTheoDoiAsync",data:{GhiChu:e.newItemTheoDoi.ghiChu,HocVienId:e.newItemTheoDoi.hocVien.hocVienId}}).then(function(a){console.log(a),"OK"===a.data.status?(e.hocVienTheoDoi.splice(0,0,a.data.result),e.snackbar=!0,e.messageText="Thêm mới thành công !!!",e.color="success",e.newItemTheoDoi.ghiChu="",e.newItemTheoDoi.hocVien="",e.dialogTheoDoi=!1):(e.snackbar=!0,e.messageText=a.data.message,e.color="error")}).catch(function(a){console.log(a.response.data.Message),e.snackbar=!0,e.messageText="Thêm mới lỗi: "+a.response.data.Message,e.color="error"})}},async onDeleteTheoDoi(e){let a=this;await axios({method:"delete",url:"/thongke/DeleteHocVienTheoDoiAsync",data:{NoteId:e.noteId}}).then(function(o){console.log(o),"OK"===o.data.status?(a.hocVienTheoDoi.splice(a.hocVienTheoDoi.indexOf(e),1),a.snackbar=!0,a.messageText="Xóa thành công !!!",a.color="success",a.deleteDialogTheoDoi=!1):(a.snackbar=!0,a.messageText=o.data.message,a.color="error")}).catch(function(e){console.log(e.response.data.Message),a.snackbar=!0,a.messageText="Xóa lỗi: "+e.response.data.Message,a.color="error"})},async onUpdateTheoDoi(e){let a=this;await axios({method:"put",url:"/thongke/UpdateHocVienTheoDoiAsync",data:{GhiChu:e.ghiChu,NoteId:e.noteId}}).then(function(e){console.log(e),"OK"===e.data.status?(a.snackbar=!0,a.messageText="Cập nhật thành công !!!",a.color="success"):(a.snackbar=!0,a.messageText=e.data.message,a.color="error")}).catch(function(e){console.log(e.response.data.Message),a.snackbar=!0,a.messageText="Cập nhật lỗi: "+e.response.data.Message,a.color="error"})},async onDeleteBienLai(e){let a=this;await axios({method:"delete",url:"/BienLai/DeleteBienLaiAsync",data:{BienLaiId:e.bienLaiId}}).then(function(o){console.log(o),"OK"===o.data.status?(a.bienLai.splice(a.bienLai.indexOf(e),1),a.snackbar=!0,a.messageText="Xóa thành công !!!",a.color="success",a.deleteBienLaiDialog=!1):(a.snackbar=!0,a.messageText=o.data.message,a.color="error")}).catch(function(e){console.log(e.response.data.Message),a.snackbar=!0,a.messageText="Xóa lỗi: "+e.response.data.Message,a.color="error"})}}});