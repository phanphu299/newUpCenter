<div id="HocVienIndex">
    <v-app>
        <div class="container">
            <div class="col s10 m6 l6">
                <h5 class="breadcrumbs-title">{{ title }}</h5>
            </div>

            <v-card>
                <v-card-title>
                    @if (ViewBag.CanContribute)
                    {
                        <v-btn color="success"
                               v-on:click.stop="dialogImport = true"
                               class="white--text">
                            Thêm Từ Excel
                            <v-icon right dark>attach_file</v-icon>
                        </v-btn>

                        <v-dialog v-model="dialog" persistent max-width="600px">
                            <v-btn color="primary"
                                   slot="activator"
                                   class="white--text">
                                Thêm Mới
                                <v-icon right dark>add</v-icon>
                            </v-btn>
                            <v-card>
                                <v-card-title>
                                    <span class="headline">Thêm Học Viên Mới</span>
                                </v-card-title>
                                <v-card-text>
                                    <v-container grid-list-md>
                                        <v-layout wrap>

                                            <v-flex xs12 sm3>
                                                <v-text-field label="Họ Và Tên *" required v-model="newItem.fullName"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-text-field label="English Name" required v-model="newItem.englishName"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-text-field label="Email" required v-model="newItem.facebookAccount"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-menu v-model="isShowDatePicker"
                                                        :close-on-content-click="false"
                                                        :nudge-right="40"
                                                        lazy
                                                        transition="scale-transition"
                                                        offset-y
                                                        full-width
                                                        min-width="290px">
                                                    <v-text-field slot="activator"
                                                                  v-model="newItem.ngaySinh"
                                                                  label="Ngày Sinh"
                                                                  prepend-icon="event"
                                                                  readonly></v-text-field>
                                                    <v-date-picker locale="vi-vn" v-model="newItem.ngaySinh" v-on:input="isShowDatePicker = false"></v-date-picker>
                                                </v-menu>
                                            </v-flex>

                                            <v-flex xs12 sm3>
                                                <v-text-field label="SĐT" v-model="newItem.phone"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-text-field label="SĐT Khác" v-model="newItem.otherPhone"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-text-field label="Họ Tên Phụ Huynh" v-model="newItem.parentFullName"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-text-field label="SĐT Phụ Huynh" v-model="newItem.parentPhone"></v-text-field>
                                            </v-flex>

                                            <v-flex xs12 sm3>
                                                <v-text-field label="CMND" v-model="newItem.cmnd"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-text-field label="Địa Chỉ" v-model="newItem.diaChi"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-text-field label="Notes" v-model="newItem.notes"></v-text-field>
                                            </v-flex>
                                            <v-flex xs12 sm3>
                                                <v-select :items="itemQuanHe"
                                                          item-text="name"
                                                          item-value="quanHeId"
                                                          v-model="newItem.quanHe"
                                                          clearable
                                                          label="Chọn Quan Hệ">
                                                </v-select>
                                            </v-flex>

                                            <v-flex xs12 sm5>
                                                <v-menu v-model="isShowDatePickerNgayHoc"
                                                        :close-on-content-click="false"
                                                        :nudge-right="40"
                                                        lazy
                                                        transition="scale-transition"
                                                        offset-y
                                                        full-width
                                                        min-width="290px">
                                                    <v-text-field slot="activator"
                                                                  v-model="newItem.ngayHoc"
                                                                  label="Ngày Học *"
                                                                  prepend-icon="event"
                                                                  readonly></v-text-field>
                                                    <v-date-picker locale="vi-vn" v-model="newItem.ngayHoc" v-on:input="isShowDatePickerNgayHoc = false"></v-date-picker>
                                                </v-menu>
                                            </v-flex>

                                            <v-flex xs12 sm5>
                                                <v-select v-model="newItem.lopHoc"
                                                          :items="itemLopHoc"
                                                          item-text="name"
                                                          return-object
                                                          chips
                                                          label="Chọn Lớp Học">
                                                    <template v-slot:selection="data">
                                                        <v-chip :selected="data.selected"
                                                                color="green"
                                                                text-color="white">
                                                            <span>{{ data.item.name }}</span>

                                                        </v-chip>
                                                    </template>
                                                </v-select>
                                            </v-flex>

                                            <v-flex xs12 sm2>
                                                <v-tooltip top>
                                                    <template v-slot:activator="{ on }">
                                                        <v-btn slot="activator" v-on="on" color="primary darken-1" small v-on:click="onAddNgayHocLopHoc">Thêm</v-btn>
                                                    </template>
                                                    <strong>Thêm Ngày Học và Lớp Học</strong>
                                                </v-tooltip>
                                            </v-flex>

                                            <v-flex xs12 sm12>
                                                <table class="table table-condensed table-hover table-bordered" style="border: 1px solid #ddd;">
                                                    <thead style="background-color: orange;">
                                                        <tr style="border: 1px solid #ddd;">
                                                            <th style="border: 1px solid #ddd;text-align:center"> Ngày Học</th>
                                                            <th style="border: 1px solid #ddd;text-align:center"> Lớp Học</th>
                                                            <th style="border: 1px solid #ddd;text-align:center"> Xóa</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr style="border: 1px solid #ddd;" v-for="(item,i) in arrayNgayHocLopHoc" :key="i">
                                                            <td style="border: 1px solid #ddd; vertical-align: middle; padding-right:5px; padding-top: 0px; padding-bottom: 0px; text-align:center">{{ item.lopHoc.name }}</td>
                                                            <td style="border: 1px solid #ddd; vertical-align: middle; padding-right:5px; padding-top: 0px; padding-bottom: 0px; text-align:center">{{ item.ngayHoc }}</td>
                                                            <td style="border: 1px solid #ddd; vertical-align: middle; padding-right:5px; padding-top: 0px; padding-bottom: 0px; text-align:center">
                                                                <v-tooltip top>
                                                                    <template v-slot:activator="{ on }">
                                                                        <v-btn slot="activator" v-on="on" color="error darken-1" fab small flat v-on:click="onXoaNgayHocLopHoc(item)"><v-icon>delete</v-icon></v-btn>
                                                                    </template>
                                                                    <strong>Xóa Lớp Học và Ngày Học</strong>
                                                                </v-tooltip>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </v-flex>

                                        </v-layout>
                                    </v-container>
                                    <small>* bắt buộc</small>
                                    <v-alert v-model="alert"
                                             dismissible
                                             color="warning"
                                             icon="priority_high"
                                             outline>
                                        Không được bỏ trống
                                    </v-alert>
                                </v-card-text>
                                <v-card-actions>
                                    <v-spacer></v-spacer>
                                    <v-btn color="secondary darken-1" flat v-on:click="dialog = false">Đóng</v-btn>
                                    <v-btn color="blue darken-1 white--text" v-on:click="onSave">Lưu</v-btn>
                                </v-card-actions>
                            </v-card>
                        </v-dialog>
                    }

                    <v-spacer></v-spacer>
                    <v-text-field v-model="search"
                                  append-icon="search"
                                  label="Tìm Kiếm"
                                  single-line
                                  hide-details></v-text-field>
                </v-card-title>
                <v-data-table :headers="headers"
                              :items="khoaHocItems"
                              :search="search"
                              class="elevation-1">
                    <template slot="items" slot-scope="props">
                        <td class="justify-center layout px-0">
                            @if (ViewBag.CanContribute)
                            {
                                <v-tooltip top>
                                    <template v-slot:activator="{ on }">
                                        <v-btn flat icon
                                               color="red"
                                               v-on="on"
                                               v-on:click.stop="deleteDialog = true"
                                               v-on:click="itemToDelete = props.item">
                                            <v-icon>delete</v-icon>
                                        </v-btn>
                                    </template>
                                    <strong>Xóa</strong>
                                </v-tooltip>

                                <v-tooltip top>
                                    <template v-slot:activator="{ on }">
                                        <v-btn flat icon
                                               color="primary"
                                               v-on="on"
                                               v-on:click.stop="dialogEdit = true"
                                               v-on:click="mappingEditItem(props.item)">
                                            <v-icon>edit</v-icon>
                                        </v-btn>
                                    </template>
                                    <strong>Sửa</strong>
                                </v-tooltip>

                                <v-tooltip top>
                                    <template v-slot:activator="{ on }">
                                        <v-btn flat icon
                                               color="success"
                                               v-on="on"
                                               v-on:click.stop="dialogDiemDanh = true"
                                               v-on:click="mappingDiemDanhItem(props.item)">
                                            <v-icon>info</v-icon>
                                        </v-btn>
                                    </template>
                                    <strong>Xem Điểm Danh</strong>
                                </v-tooltip>

                                <v-tooltip top>
                                    <template v-slot:activator="{ on }">
                                        <v-btn flat icon
                                               color="warning"
                                               v-on="on"
                                               v-on:click.stop="dialogNgayHoc = true"
                                               v-on:click="mappingNgayHocItem(props.item)">
                                            <v-icon>calendar_today</v-icon>
                                        </v-btn>
                                    </template>
                                    <strong>Thêm Ngày Bắt Đầu Và Kết Thúc</strong>
                                </v-tooltip>

                                <v-tooltip top>
                                    <template v-slot:activator="{ on }">
                                        <v-btn flat icon
                                               color="secondary"
                                               v-on="on"
                                               v-on:click.stop="dialogThemLop = true"
                                               v-on:click="mappingThemLopItem(props.item)">
                                            <v-icon>add</v-icon>
                                        </v-btn>
                                    </template>
                                    <strong>Thêm Học Viên Vào Lớp Cũ ( Hủy hoặc Tốt Nghiệp )</strong>
                                </v-tooltip>
                            }
                        </td>
                        <td class="px-0">{{ props.item.fullName }}</td>
                        <td>{{ props.item.trigram }}</td>
                        <td>
                            <v-tooltip top v-if="props.item.lopHocList.length > 0">
                                <template v-slot:activator="{ on }">
                                    <v-icon color="grey lighten-1" dark v-on="on">class</v-icon>
                                </template>
                                <div v-for="lop in props.item.lopHocList">
                                    <strong>{{ lop.name }}</strong><v-icon v-if="lop.isCanceled || lop.isGraduated" color="grey lighten-1">report</v-icon>
                                </div>
                            </v-tooltip>
                        </td>
                        <td>{{ props.item.ngaySinh }}</td>
                        <td>{{ props.item.cmnd }}</td>
                        <td>{{ props.item.phone }}</td>
                        <td>{{ props.item.otherPhone }}</td>
                        <td>{{ props.item.diaChi }}</td>
                        <td>{{ props.item.notes }}</td>
                        <td>{{ props.item.facebookAccount }}</td>
                        <td>{{ props.item.parentFullName }}</td>
                        <td>{{ props.item.parentPhone }}</td>
                        <td>{{ props.item.englishName }}</td>
                        <td>{{ props.item.quanHe }}</td>
                        <td>{{ props.item.createdDate }}</td>
                        <td>{{ props.item.createdBy }}</td>
                        <td>{{ props.item.updatedDate }}</td>
                        <td>{{ props.item.updatedBy }}</td>
                    </template>
                    <v-alert slot="no-results" :value="true" color="error" icon="warning">
                        Không tìm thấy "{{ search }}".
                    </v-alert>
                </v-data-table>
            </v-card>
        </div>


        @*Delete Dialog*@
        <v-dialog v-model="deleteDialog"
                  width="500">
            <v-card>
                <v-card-title class="headline error lighten-2 white--text"
                              primary-title>
                    Xác Nhận
                </v-card-title>

                <v-card-text>
                    Bạn có chắc xóa '{{ itemToDelete.fullName }}'?
                </v-card-text>

                <v-divider></v-divider>

                <v-card-actions>
                    <v-spacer></v-spacer>

                    <v-btn color="secondary"
                           flat
                           v-on:click="deleteDialog = false">
                        Đóng
                    </v-btn>

                    <v-btn color="error white--text"
                           v-on:click="onDelete(itemToDelete)">
                        Xóa
                    </v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

        @*Edit Dialog*@
        <v-dialog v-model="dialogEdit" persistent max-width="600px">
            <v-card>
                <v-card-title>
                    <span class="headline">Cập Nhật Học Viên '{{ itemToEdit.fullName }}'</span>
                </v-card-title>
                <v-card-text>
                    <v-container grid-list-md>
                        <v-layout wrap>

                            <v-flex xs12 sm3>
                                <v-text-field label="Họ Và Tên *" required v-model="itemToEdit.fullName"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-text-field label="English Name" required v-model="itemToEdit.englishName"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-text-field label="Email" required v-model="itemToEdit.facebookAccount"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-menu v-model="isShowDatePicker2"
                                        :close-on-content-click="false"
                                        :nudge-right="40"
                                        lazy
                                        transition="scale-transition"
                                        offset-y
                                        full-width
                                        min-width="290px">
                                    <v-text-field slot="activator"
                                                  v-model="itemToEdit.ngaySinh"
                                                  label="Ngày Sinh"
                                                  prepend-icon="event"
                                                  readonly></v-text-field>
                                    <v-date-picker locale="vi-vn" v-model="itemToEdit.ngaySinh" v-on:input="isShowDatePicker2 = false"></v-date-picker>
                                </v-menu>
                            </v-flex>

                            <v-flex xs12 sm3>
                                <v-text-field label="SĐT" v-model="itemToEdit.phone"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-text-field label="SĐT Khác" v-model="itemToEdit.otherPhone"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-text-field label="Họ Tên Phụ Huynh" v-model="itemToEdit.parentFullName"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-text-field label="SĐT Phụ Huynh" v-model="itemToEdit.parentPhone"></v-text-field>
                            </v-flex>

                            <v-flex xs12 sm3>
                                <v-text-field label="CMND" v-model="itemToEdit.cmnd"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-text-field label="Địa Chỉ" v-model="itemToEdit.diaChi"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-text-field label="Notes" v-model="itemToEdit.notes"></v-text-field>
                            </v-flex>
                            <v-flex xs12 sm3>
                                <v-select :items="itemQuanHe"
                                          item-text="name"
                                          item-value="quanHeId"
                                          v-model="itemToEdit.quanHeId"
                                          clearable
                                          label="Chọn Quan Hệ">
                                </v-select>
                            </v-flex>

                            <v-flex xs12 sm5>
                                <v-menu v-model="isShowDatePickerNgayHoc2"
                                        :close-on-content-click="false"
                                        :nudge-right="40"
                                        lazy
                                        transition="scale-transition"
                                        offset-y
                                        full-width
                                        min-width="290px">
                                    <v-text-field slot="activator"
                                                  v-model="itemToEdit.ngayHoc"
                                                  label="Ngày Học *"
                                                  prepend-icon="event"
                                                  readonly></v-text-field>
                                    <v-date-picker locale="vi-vn" v-model="itemToEdit.ngayHoc" v-on:input="isShowDatePickerNgayHoc2 = false"></v-date-picker>
                                </v-menu>
                            </v-flex>

                            <v-flex xs12 sm5>
                                <v-select v-model="itemToEdit.lopHoc"
                                          :items="itemLopHoc"
                                          item-text="name"
                                          return-object
                                          chips
                                          label="Chọn Lớp Học">
                                    <template v-slot:selection="data">
                                        <v-chip :selected="data.selected"
                                                color="green"
                                                text-color="white">
                                            <span>{{ data.item.name }}</span>

                                        </v-chip>
                                    </template>
                                </v-select>
                            </v-flex>

                            <v-flex xs12 sm2>
                                <v-tooltip top>
                                    <template v-slot:activator="{ on }">
                                        <v-btn slot="activator" v-on="on" color="primary darken-1" small v-on:click="onAddNgayHocLopHocForEdit(itemToEdit)">Thêm</v-btn>
                                    </template>
                                    <strong>Thêm Ngày Học và Lớp Học</strong>
                                </v-tooltip>
                            </v-flex>

                            <v-flex xs12 sm12>
                                <table class="table table-condensed table-hover table-bordered" style="border: 1px solid #ddd;">
                                    <thead style="background-color: orange;">
                                        <tr style="border: 1px solid #ddd;">
                                            <th style="border: 1px solid #ddd;text-align:center"> Lớp Học</th>
                                            <th style="border: 1px solid #ddd;text-align:center"> Ngày Học</th>
                                            <th style="border: 1px solid #ddd;text-align:center"> Xóa</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border: 1px solid #ddd;" v-for="(item,i) in itemToEdit.lopHoc_NgayHocList" :key="i">
                                            <td style="border: 1px solid #ddd; vertical-align: middle; padding-right:5px; padding-top: 0px; padding-bottom: 0px; text-align:center">{{ item.lopHoc.name }}</td>
                                            <td style="border: 1px solid #ddd; vertical-align: middle; padding-right:5px; padding-top: 0px; padding-bottom: 0px; text-align:center">{{ item.ngayHoc }}</td>
                                            <td style="border: 1px solid #ddd; vertical-align: middle; padding-right:5px; padding-top: 0px; padding-bottom: 0px; text-align:center">
                                                <v-tooltip top>
                                                    <template v-slot:activator="{ on }">
                                                        <v-btn slot="activator" v-on="on" color="error darken-1" fab small flat v-on:click="onXoaNgayHocLopHocForEdit(item)"><v-icon>delete</v-icon></v-btn>
                                                    </template>
                                                    <strong>Xóa Lớp Học và Ngày Học</strong>
                                                </v-tooltip>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </v-flex>
                        </v-layout>
                    </v-container>
                    <small>* bắt buộc</small>
                    <v-alert v-model="alertEdit"
                             dismissible
                             color="warning"
                             icon="priority_high"
                             outline>
                        Không được bỏ trống
                    </v-alert>
                </v-card-text>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="secondary darken-1" flat v-on:click="dialogEdit = false">Đóng</v-btn>
                    <v-btn color="blue darken-1 white--text" v-on:click="onUpdate(itemToEdit)">Lưu</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

        @*NgayHoc Dialog*@
        <v-dialog v-model="dialogNgayHoc" persistent max-width="600px">
            <v-card>
                <v-card-title>
                    <span class="headline">Thêm Ngày Bắt Đầu Và Kết Thúc Cho Học Viên '{{ itemToNgayHoc.fullName }}'</span>
                </v-card-title>
                <v-card-text>
                    <v-container grid-list-md>
                        <v-layout wrap>

                            <v-flex xs12 sm4>
                                <v-select v-model="selectedLopHoc"
                                          :items="itemNgayHoc"
                                          item-text="name"
                                          item-value="lopHocId"
                                          chips
                                          label="Chọn Lớp Học"
                                          v-on:change="GetNgayHocByHocVien">
                                    <template v-slot:selection="data">
                                        <v-chip :selected="data.selected"
                                                color="green"
                                                text-color="white">
                                            <span>{{ data.item.name }}</span>
                                        </v-chip>
                                    </template>
                                </v-select>
                            </v-flex>

                            <v-flex xs12 sm4>
                                <v-menu v-model="isShowDatePickerBatDau"
                                        :close-on-content-click="false"
                                        :nudge-right="40"
                                        lazy
                                        transition="scale-transition"
                                        offset-y
                                        full-width
                                        min-width="290px"
                                        v-if="selectedLopHoc.length > 0">
                                    <v-text-field slot="activator"
                                                  v-model="ngayHocItem.ngayBatDau"
                                                  label="Ngày Bắt Đầu *"
                                                  prepend-icon="event"
                                                  readonly></v-text-field>
                                    <v-date-picker locale="vi-vn" v-model="ngayHocItem.ngayBatDau" v-on:input="isShowDatePickerBatDau = false"></v-date-picker>
                                </v-menu>
                            </v-flex>

                            <v-flex xs12 sm4>
                                <v-menu v-model="isShowDatePickerKetThuc"
                                        :close-on-content-click="false"
                                        :nudge-right="40"
                                        lazy
                                        transition="scale-transition"
                                        offset-y
                                        full-width
                                        min-width="290px"
                                        v-if="selectedLopHoc.length > 0">
                                    <v-text-field slot="activator"
                                                  v-model="ngayHocItem.ngayKetThuc"
                                                  label="Ngày Kết Thúc"
                                                  clearable 
                                                  prepend-icon="event"
                                                  readonly></v-text-field>
                                    <v-date-picker locale="vi-vn" v-model="ngayHocItem.ngayKetThuc" v-on:input="isShowDatePickerKetThuc = false"></v-date-picker>
                                </v-menu>
                            </v-flex>

                        </v-layout>
                    </v-container>
                    <v-alert v-model="alertNgayHoc"
                             dismissible
                             color="warning"
                             icon="priority_high"
                             outline>
                        Không được bỏ trống ngày bắt đầu hoặc lớp học
                    </v-alert>
                </v-card-text>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="secondary darken-1" flat v-on:click="dialogNgayHoc = false; selectedLopHoc = {}">Đóng</v-btn>
                    <v-btn color="blue darken-1 white--text" v-on:click="onThemNgayHoc(itemToNgayHoc)">Lưu</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

        @*Import Dialog*@
        <v-dialog v-model="dialogImport" persistent max-width="600px">
            <v-card>
                <v-card-title>
                    <span class="headline">Thêm Học Viên Từ Excel</span>
                </v-card-title>
                <v-card-text>
                    <v-container grid-list-md>
                        <v-layout wrap>

                            <v-flex xs12 sm4>
                                <v-select v-model="selectedLopHoc"
                                          :items="itemLopHoc"
                                          item-text="name"
                                          item-value="lopHocId"
                                          chips
                                          label="Chọn Lớp Học">
                                    <template v-slot:selection="data">
                                        <v-chip :selected="data.selected"
                                                color="green"
                                                text-color="white">
                                            <span>{{ data.item.name }}</span>
                                        </v-chip>
                                    </template>
                                </v-select>
                            </v-flex>

                            <v-flex xs12 sm4 v-if="selectedLopHoc.length > 0">
                                <v-btn color="primary"
                                       class="white--text" v-on:click="onExportTemplate">
                                    Download mẫu excel
                                    <v-icon right dark>attach_file</v-icon>
                                </v-btn>
                            </v-flex>

                            <input v-if="selectedLopHoc.length > 0" type="file" id="file" ref="myFiles" class="custom-file-input"/>

                        </v-layout>
                    </v-container>
                </v-card-text>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="secondary darken-1" flat v-on:click="dialogImport = false; selectedLopHoc = {}">Đóng</v-btn>
                    <v-btn color="blue darken-1 white--text" v-on:click="onImport">Lưu</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

        @*DiemDanh Dialog*@
        <v-dialog v-model="dialogDiemDanh" persistent max-width="600px">
            <v-card>
                <v-card-title>
                    <span class="headline">Lịch Sử Điểm Danh Học Viên '{{ itemToDiemDanh.fullName }}'</span>
                </v-card-title>
                <v-card-text>
                    <v-container grid-list-md>
                        <v-layout wrap>

                            <v-flex xs12 sm4>
                                <v-select v-model="selectedLopHoc"
                                          :items="itemDiemDanh"
                                          item-text="name"
                                          item-value="lopHocId"
                                          chips
                                          label="Chọn Lớp Học"
                                          v-on:change="GetDiemDanhByHocVien">
                                    <template v-slot:selection="data">
                                        <v-chip :selected="data.selected"
                                                color="green"
                                                text-color="white">
                                            <span>{{ data.item.name }}</span>
                                        </v-chip>
                                    </template>
                                </v-select>
                            </v-flex>

                            <v-flex xs12 sm4>
                                <v-select :items="itemThang"
                                          v-model="selectedThang"
                                          chips
                                          label="Chọn Tháng"
                                          v-on:change="GetDiemDanhByHocVien"></v-select>
                            </v-flex>

                            <v-flex xs12 sm4>
                                <v-select :items="itemNam"
                                          v-model="selectedNam"
                                          chips
                                          label="Chọn Năm"
                                          v-on:change="GetDiemDanhByHocVien"></v-select>
                            </v-flex>

                            <v-container fluid v-if="diemDanhItems.length > 0">
                                <v-layout wrap>
                                    <v-flex>
                                        <div style="overflow-x:auto;">
                                            <table class="table table-condensed table-hover table-bordered" style="border: 1px solid #ddd;">
                                                <thead style="background-color: orange;">
                                                    <tr style="border: 1px solid #ddd;">
                                                        <th style="border: 1px solid #ddd; text-align: center" v-for="(column, index) in soNgayHoc" :key="index"> {{ column }}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr style="border: 1px solid #ddd;">
                                                        <td style="border: 1px solid #ddd; text-align: center" v-for="(column, indexColumn) in soNgayHoc" :key="indexColumn">
                                                            <span v-for="(item, index) in diemDanhItems" :key="index">
                                                                <i v-if="item.day == column && item.isOff == false">x</i>
                                                                <i v-else-if="item.day == column && item.isOff == true && item.isDuocNghi == true">OFF</i>
                                                                <i v-else-if="item.day == column && item.isOff == true && item.isDuocNghi == null"></i>
                                                            </span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </v-flex>
                                </v-layout>
                            </v-container>

                        </v-layout>
                    </v-container>
                </v-card-text>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="secondary darken-1" flat v-on:click="dialogDiemDanh = false; diemDanhItems = []; selectedLopHoc = {}">Đóng</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

        @*ThemLop Dialog*@
        <v-dialog v-model="dialogThemLop" persistent max-width="600px">
            <v-card>
                <v-card-title>
                    <span class="headline">Thêm Học Viên '{{ itemToThemLop.fullName }}' Vào Lớp Học</span>
                </v-card-title>
                <v-card-text>
                    <v-container grid-list-md>
                        <v-layout wrap>

                            <v-flex xs12>
                                <v-select v-model="selectedArrayLopHoc"
                                          :items="itemThemLop"
                                          item-text="name"
                                          item-value="lopHocId"
                                          chips
                                          multiple
                                          label="Chọn Lớp Học">
                                    <template v-slot:selection="data">
                                        <v-chip :selected="data.selected"
                                                color="green"
                                                text-color="white">
                                            <span>{{ data.item.name }}</span>
                                        </v-chip>
                                    </template>
                                </v-select>
                            </v-flex>

                        </v-layout>
                    </v-container>
                </v-card-text>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="secondary darken-1" flat v-on:click="dialogThemLop = false; selectedArrayLopHoc = {}">Đóng</v-btn>
                    <v-btn color="blue darken-1 white--text" v-on:click="onThemLop(itemToThemLop)">Lưu</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

        <v-snackbar v-model="snackbar"
                    :color="color"
                    :timeout="timeout"
                    top
                    right>
            {{ messageText }}
            <v-btn dark
                   flat
                   v-on:click="snackbar = false">
                Close
            </v-btn>
        </v-snackbar>
    </v-app>
</div>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="~/js/hocvienindex.min.js" type="text/javascript"></script>

<style>
    .v-input__slot:before, .v-input__slot:after {
        display: none
    }

    .v-small-dialog a {
        text-decoration-style: dashed;
        text-decoration-line: underline;
        text-decoration-color: #0088cc;
    }

    td, th {
        padding: unset;
    }

    .table-bordered {
        border: 1px solid #ddd;
    }

    .table {
        width: 100%;
        max-width: 100%;
        margin-bottom: 20px;
    }

    table {
        background-color: transparent;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    .table > caption + thead > tr:first-child > td, .table > caption + thead > tr:first-child > th, .table > colgroup + thead > tr:first-child > td, .table > colgroup + thead > tr:first-child > th, .table > thead:first-child > tr:first-child > td, .table > thead:first-child > tr:first-child > th {
        border-top: 0;
    }

    .table-bordered > thead > tr > td, .table-bordered > thead > tr > th {
        border-bottom-width: 2px;
    }

    .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > td, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > thead > tr > th {
        border: 1px solid #ddd;
    }

    .table-condensed > tbody > tr > td, .table-condensed > tbody > tr > th, .table-condensed > tfoot > tr > td, .table-condensed > tfoot > tr > th, .table-condensed > thead > tr > td, .table-condensed > thead > tr > th {
        padding: 5px;
    }

    .table > thead > tr > th {
        vertical-align: bottom;
        border-bottom: 2px solid #ddd;
    }

    .table > tbody > tr > td, .table > tbody > tr > th, .table > tfoot > tr > td, .table > tfoot > tr > th, .table > thead > tr > td, .table > thead > tr > th {
        padding: 8px;
        line-height: 1.42857143;
        vertical-align: top;
        border-top: 1px solid #ddd;
    }
</style>